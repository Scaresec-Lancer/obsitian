# 9.5

考试课（54学时理论 + 36学时实验 ）60%卷面 + 20%实验 + 20%平时![](https://pic.imgdb.cn/item/63153b0416f2c2beb1eaf6ae.png)

## 1.1 计算机网络在信息时代中的作用
21世纪重要特征：数字化、网格化、信息化，是一个以网络为核心的信息时代。

三大网络：电信网络、有线电视网络、计算机网络。

互联网两个重要基本特点：连通性和共享，资源共享包括**信息共享、软件共享、硬件共享**

对于仅在局部范围互联起来的计算机网络，只能称之为互连网

## 1.2 互联网概述

计算机网络由若干节点（node）和连接这些节点的链路（link）组成，多个网络通过一些路由器相互连接起来，构成一个覆盖范围更大的计算机网络，称为互连网。

网络把许多计算机连接在一起，互连网把许多网络通过一些路由器连接在一起，与网络相连的计算机常称为主机。

互联网服务提供者ISP，比如移动、电信、联通；为了更快的转发分组，互联网交换点IXP应运而生。



互联网基础结构发展的三个阶段：

- 从单个网络ARPANET向互连网发展的过程
- 建成了三级结构的互联网：主干网、地区网、校园网（或企业网）
- 形成全球范围的多层次ISP结构的互联网



互联网机构：

- 互联网协会ISOC
- 互联网体系结构委员会IAB
- 互联网工程部IRTF
- 互联网研究部IRTF



制订互联网的正式标准需要三个阶段：

- 互联网草案，有效期6个月
- 建议标准，开始成为RFC文档
- 互联网标准，一个标准可以和多个RFC文档关联

## 1.3 互联网的组成
从工作方式上看，划分为两大块：
 - 边缘部分 由所有连接在互联网上的主机组成，这部分用户直接使用，用来进行通信（传送数据、音频或视频）和资源共享
 - 核心部分 由大量网络和连接这些网络的路由器组成，为边缘部分提供服务（提供连通性和交换）

**分享：什么软件用了P2P，工作原理**

- https://www.sohu.com/a/389909459_117107

**互联网的边缘部分**

处在互联网边缘的部分就是连接在互联网上所有的主机，又称为端系统，小的端系统可能是笔记本电脑和智能手机，大的可以是服务器。

主机A和主机B进行通信是指，主机A的某个进程和主机B上的另一个进程进行通信，在网络边缘的端系统之间的通信分为两大类：客户-服务器方式（C/S）和对等方式（P2P）

C/S方式中，客户client和服务器server都是通信中设计的两个应用进程，客户是服务请求方，服务器是服务提供方

P2P方式中，两台主机在通信中并不区分哪一个是服务请求方和服务提供方，二者只要都运行了对等连接软件，就可以平等的对等连接通信

**互联网的核心部分**

在网络核心部分起特殊作用的是路由器，一种专用计算机（但不叫做主机），实现分组交换的关键构件



电路交换的主要特点：

从通信资源的分配角度看，交换就是动态分配传输线路的资源。拨打电话时，从主叫端到被叫端建立了一条专用的物理通路，经历了建立连接（占用通信资源）、通话（一直占用通信资源）、释放连接（归还通信资源）这三个步骤的交换方式称为电路交换。电路交换的一个重要特点：在通话的全部时间里，通信的两个用户始终占用端到端的通信资源。

用电路交换来传送计算机数据时，线路传输效率往往很低，因为计算机数据是突发式地出现在传输线路上的



分组交换的主要特点：

分组交换使用存储转发技术，通常把要发送的整块数据称为一个报文，发送前将报文划分为一个个等长数据段，在每个数据段前面加上一些必要的控制信息组成的首部（header），构成一个分组（packet），又称为包，分组的首部也成为包头

在互联网核心部分的路由器之间一般使用高速链路相连，而在网络边缘部分的主机介入到核心部分则通常以相对较低速率的链路

位于边缘的主机和位于核心的路由器都是计算机，但主机为用户进行信息处理，而路由器用来转发分组：路由器找到一个分组，先暂时存储一下，检查其首部，查找转发表，按照首部中的目的地址找到合适的接口转发出去，把分组交给下一个路由器，这样一步一步的以存储转发的方式，把分组交付最终的目的主机

各路由器之间必须经常交换彼此掌握的路由信息，以便创建和动态维护路由器中的转发表

分组交换的优点：

| 优点 | 所采用的手段                                                 |
| ---- | ------------------------------------------------------------ |
| 高效 | 在分组传输的过程中动态分配传输带宽，对通信链路逐段占用       |
| 灵活 | 为每一个分组独立的选择最合适的转发路由                       |
| 迅速 | 以分组为传送单位，不先建立连接就能向其他主机发送分组         |
| 可靠 | 保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性 |



分组交换也有问题，比如分组在各路由器存储转发时要排队，造成一定的时延，各分组必须携带的控制信息也造成了一定的开销，整个分组交换网还需要专门的管理和控制机制



三种交换方式在数据传送阶段的主要特点：

- 电路交换——整个报文的比特流连续的从源头直达终点
- 报文交换——整个报文先传送到相邻节点，全部存储下来后转发到下一个节点
- 分组交换——单个分组（报文的一部分）传送到相邻节点，存储后转发到下一个节点

![image-20220906000707563](https://pic.imgdb.cn/item/63161eeb16f2c2beb1e1f90c.png)

若需要连续传送大量数据，且传送时间远大于连接建立时间，则电路交换的传输速率快。报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用率。由于一个分组的长度远小于整个报文的长度，所以分组交换时延小，灵活性好。

从第四代蜂窝移动网络开始，无论是语音通话还是数据通信，都要采用分组交换

## 1.4 计算机网络在我国的发展

## 1.5 计算机网络的类别

### 1.5.2 不同的计算机网络

**按网络的作用范围进行分类**

- 广域网WAN：作用范围几十到几千公里，是互联网的核心部分，连接广域网各节点交换机一般为高速链路
- 城域网MAN：范围是一个城市，可跨越几个街区甚至整个城市，可以为一个或几个单位所拥有，也可以是公用设施，用来将多个局域网进行互连，目前很多城域网采用的是以太技术。
- 局域网LAN：一般用微型计算机或工作站通过高速通信线路相连，学校和企业大都拥有多个互连的局域网（称为校园网或企业网）
- 个人局域网PAN：把属于个人的电子设备用无线技术连接起来的技术，范围约10m左右



**按网络的使用者进行分类**

- 公用网：指电信公司出资建造的大型网络
- 专用网：某个部门为满足本单位的特殊业务工作的需要而建造的网络，例如军队、铁路、银行、电力等系统均有专用网



**用来把用户接入到互联网的网络**

接入网AN，又称本地接入网或居民接入网

## 1.6 计算机网络的性能

### 1.6.1 计算机网络的性能指标

**1、速率**

网络技术中的速率指数据的传送速率，也成为数据率或比特率，单位是bit/s。当提到网络的速率时，往往指额定速率或标称速率，而并非实际运行速率。

**2、带宽**

带宽有以下两种不同的含义：

- 指某个信号具有的频带宽度。信号的带宽指该信号包含各种不同频率成分所占据的频率范围，单位为赫
- 指计算机网络中，表示某通道传送数据的能力，单位时间内网络中某信道所能通过的最高数据率，单位为bit/s

> 计算机领域，数的计算使用二进制，K=2^10，M=2^20，G=2^30；但在通信领域，K=10^3，M=10^6，G=10^9

在带宽的上述两种表述中，前者为频域称谓，后者为时域称谓，其本质是相同的，也就是说，一条通信链路的带宽越宽，所能传输的最高数据率也越高。

**3、吞吐量**

指单位时间内通过某个网络（或信道、接口）的实际数据量

**4、时延**

指数据（一个报文或分组，甚至比特）从网络一段传送到另一端所需的时间，也称延迟或迟延。时延由以下几部分组成：

- 发送时延：主机或路由器发送数据帧所需的时间，`发送时延=数据帧长度/发送速率`，由此可见对一定的网络，发送时延并非固定不变，而是与发送的帧长成正比，与发送速率成反比
- 传播时延：指电磁波在信道中传播一定距离花费的时间，`传播时延=信道长度/电磁波在信道上的传播速率`。电磁波在自由空间的传播速率是光速，即3.0×10^5 km/s , 在铜线电缆中约为2.3×103km/s，在光纤中约为2.0×10km/s。

> 以上两种时延有本质上的不同：发送时延在机器内部的发送器中，与传输信道的距离没有任何关系；传播时延则发生在机器外部的传输信道媒体上，而与信号的发送速率无关，距离越远，传播时延就越大。

- 处理时延：主机或路由器在收到分组时要花费一定的时间进行处理，例如分析分组的首部、从分组中提取数据部分、进行差错检验或查找转发表等

- 排队时延：分组在进入路由器后，要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发。排队时延的长短往往取决于网络当时的通信量，当网络的通信量很大时会发生队列溢出，使分组丢失，这相当于排队时延为无穷大。

数据在网络中经历的总时延就是以上四种时延之和：`总时延=发送时延+传播时延+处理时延+排队时延`
![image-20220922154830185](https://pic.imgdb.cn/item/632c13ab16f2c2beb126a897.png)

对于高速网络链路，我们提高的是数据的发送速率。电磁波在通信线路上的传播速率取决于通信线路的介质材料，而与数据的发送速率并无关系。提高数据的发送速率只是减小了数据的发送时延。

还有一点，数据的发送速率的单位是每秒多少个比特，是指在某个点或某个接口上的发送速率。而传播速率的单位是每秒多少公里，是指在某一段传输线路上比特的传播速率。因此，通常所说的“光纤信道的传输速率高”是指可以用很高的速率向光纤信道发送数据，而光纤信道的传播速率实际上还要比铜线的传播速率略低一点。

**5、时延带宽积**

![image-20220922155432149](https://pic.imgdb.cn/item/632c150b16f2c2beb1280257.png)

`时延带宽积=传播时延*带宽`

这是一个代表链路的圆柱形管道，管道的长度是链路的传播时延（请注意，现在以时间作为单位来表示链路长度），而管道的截面积是链路的带宽。

时延带宽积就表示这个管道的体积，表示这样的链路可容纳多少个比特。例如，设某段链路的传播时延为20ms,带宽为10Mbit/s,算出时延带宽积=20×103×10×10=2×105bit这就表明，若发送端连续发送数据，则在发送的第一个比特即将到达终点时，发送端就已经发送了20万个比特，而这20万个比特都正在链路上向前移动。因此，链路的时延带宽积又称为以比特为单位的链路长度。

不难看出，管道中的比特数表示从发送端发出但尚未到达接收端的比特数。对于一条正在传送数据的链路，只有在代表链路的管道都充满比特时，链路才得到最充分的利用。

**6、往返时间RTT**

我们有时需要知道双向交互一次所需的时间。例如，A向B发送数据。如果数据长度是100MB,发送速率是100Mbit/s,那么 `发送时间=数据长度/发送速率=8.39s`

假定B收完数据后立即向A发送确认。再假定A只有在收到B的确认信息后，才能继续向B发送数据。显然，这就要等待一个往返时间RTT(这里假定确认信息很短，可忽略B发送确认的发送时延)。如果RTT=2s,那么可以算出A向B发送数据的有效数据率。`有效数据率=数据长度/(发送时间+RTT)=80.7Mbit/s`，比原来的100Mbit/s小不少。

在互联网中，RTT还包括各中间节点的处理时延、排队时延以及转发数据时的发送时延。当使用卫星通信时，往返时间RTT相对较长。

**7、利用率**

利用率有信道利用率和网络利用率两种。

信道利用率指出某信道有百分之几的时间是被利用的（有数据通过）。完全空闲的信道的利用率是零。网络利用率则是全网络的信道利用率的加权平均值。

信道利用率并非越高越好，根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。当网络的通信量很少时，网络产生的时延并不大。但在网络通信量不断增大的情况下，由于分组在网络节点（路由器或节点交换机）进行处理时需要排队等候，因此网络引起的时延就会增大。

如果令D0表示网络空闲时的时延，D表示网络当前的时延(设现在的网络利用率为U),那么在适当的假定条件下，可以用下面的公式来表示D与D0以及利用率U之间的关系：`D=D0/(1-U)`

这里U是网络利用率，数值在0到1之间。当网络利用率达到其容量的1/2时，时延就要加倍。特别值得注意的就是：当网络利用率接近最大值1时，网络产生的时延就趋于无穷大。因此我们必须有这样的概念：信道利用率或网络利用率过高就会产生非常大的时延。因此，一些拥有较大主干网的ISP通常控制信道利用率不超过50%。如果超过了就要准备扩容，增大线路的带宽。

![image-20220922162204101](https://pic.imgdb.cn/item/632c1b8616f2c2beb130c24e.png)

### 1.6.2 计算机网络的非性能特征

